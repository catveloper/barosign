<!DOCTYPE html>
{% extends 'common/base.html' %}
{% load bootstrap4 %}
{% block page_name %}화물 등록{% endblock %}
{% block content %}
    <form action="{% url 'calculator:freight_fv' %}" method="post">
        {% csrf_token %}
        {% bootstrap_field form.name %}
        {% bootstrap_field form.priority %}
        {% bootstrap_field form.rate_conversion_point addon_after="<span id='unit'>미선택</span>" %}
        {% bootstrap_field form.charge_per_weight addon_after="원/kg" %}
        {% bootstrap_field form.charge_per_volume addon_after="원/m<sup>3</sup>" %}
        <div class="btn-group-lg mt-3 form-row float-right">
            <button type="submit" id="save_btn" class="btn btn-danger rounded-pill mr-2">등록</button>
            <button type="button" class="btn btn-primary rounded-pill mr-2 page_link" data-url="{% url 'calculator:freight_lv' %}">취소</button>
        </div>
    </form>
{% endblock %}

{% block extra_script %}
    <script>
        CHARGE_TYPE = {% autoescape off %}{{ chargeType }}{% endautoescape %}
        $(function () {
            $('#id_rate_conversion_point, #id_charge_per_weight, #id_charge_per_volume ').inputmask("numeric", {
                autoGroup: true,
                groupSeparator: ",",
                digits: 0,
                allowMinus: false,
                repeat: 12,
                rightAlign: false,
                removeMaskOnSubmit: true
            }).next('div').find('span').css('background-color', '#e9ecef')

            $('#id_priority').change(function () {
                let chargeType = $(this).val()
                let unit =  CHARGE_TYPE[chargeType] ? CHARGE_TYPE[chargeType].unit_html : '미선택'
                $('#unit').html(unit)
            })

            $('#save_btn').click(function () {

            })

        })
    </script>
{% endblock %}